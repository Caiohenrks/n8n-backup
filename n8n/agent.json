{"updatedAt":"2026-01-05T17:56:23.180Z","createdAt":"2026-01-05T17:30:35.746Z","id":"ZmjNvqPZalYgqNHN","name":"MCP Receita ou Despesa","active":false,"isArchived":true,"nodes":[{"parameters":{"path":"income"},"type":"@n8n/n8n-nodes-langchain.mcpTrigger","typeVersion":2,"position":[-464,-32],"id":"daa4aa89-9601-4f6c-b88e-c4e737b86a2f","name":"MCP Server Trigger","webhookId":"73bdb25c-ca91-45f9-a682-0f7b1e4b1e9a"},{"parameters":{"toolDescription":"Registrar uma receita ou despesas","text":"Você DEVE responder APENAS com um JSON válido\nque respeite exatamente o schema fornecido.\nNão explique, não use texto, não use markdown.","hasOutputParser":true,"options":{}},"type":"@n8n/n8n-nodes-langchain.agentTool","typeVersion":3,"position":[-192,160],"id":"caea5108-1050-48d9-9598-c45495a5d5e1","name":"AI Agent Tool"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"builtInTools":{},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.3,"position":[-256,352],"id":"de1ab753-8029-441c-94f9-b52084099303","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"Y4tW8JkZbEkWoDHr","name":"PSW OpenAi"}}},{"parameters":{"schemaType":"manual","inputSchema":"{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"tipo\": {\n      \"type\": \"string\",\n      \"enum\": [\"income\", \"expense\"]\n    },\n    \"nome\": {\n      \"type\": \"string\"\n    },\n    \"categoria\": {\n      \"type\": \"string\"\n    },\n    \"valor\": {\n      \"type\": \"number\"\n    },\n    \"data\": {\n      \"type\": \"string\",\n      \"format\": \"date\"\n    },\n    \"forma_pagamento\": {\n      \"type\": \"string\"\n    },\n    \"conta\": {\n      \"type\": \"string\"\n    },\n    \"status\": {\n      \"type\": \"string\",\n      \"enum\": [\"pago\", \"pendente\"]\n    },\n    \"recorrente\": {\n      \"type\": \"boolean\"\n    },\n    \"parcelas\": {\n      \"type\": [\"integer\", \"null\"]\n    },\n    \"observacao\": {\n      \"type\": \"string\"\n    }\n  },\n  \"required\": [\"tipo\", \"categoria\", \"valor\", \"data\"],\n  \"additionalProperties\": false\n}\n"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[240,352],"id":"36220a99-571b-4a0e-9258-d9cbbc2fa83b","name":"Structured Output Parser"},{"parameters":{"schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"income","mode":"list","cachedResultName":"income"},"columns":{"mappingMode":"defineBelow","value":{"recorrente":false,"id":0,"valor":0},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"number","canBeUsedToMatch":true,"removed":false},{"id":"nome","displayName":"nome","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"categoria","displayName":"categoria","required":true,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"valor","displayName":"valor","required":true,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true},{"id":"data","displayName":"data","required":true,"defaultMatch":false,"display":true,"type":"dateTime","canBeUsedToMatch":true},{"id":"forma_pagamento","displayName":"forma_pagamento","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"conta","displayName":"conta","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"recorrente","displayName":"recorrente","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true},{"id":"observacao","displayName":"observacao","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"created_at","displayName":"created_at","required":false,"defaultMatch":false,"display":true,"type":"dateTime","canBeUsedToMatch":true},{"id":"updated_at","displayName":"updated_at","required":false,"defaultMatch":false,"display":true,"type":"dateTime","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.6,"position":[32,352],"id":"7602f557-b973-4897-8eb3-03b907b4f285","name":"Income","credentials":{"postgres":{"id":"iZzbVy2qVYG0Rd5z","name":"Postgres account"}}},{"parameters":{"schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"expense","mode":"list","cachedResultName":"expense"},"columns":{"mappingMode":"defineBelow","value":{"recorrente":false,"id":0,"valor":0,"parcelas":0},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"number","canBeUsedToMatch":true},{"id":"nome","displayName":"nome","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"categoria","displayName":"categoria","required":true,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"valor","displayName":"valor","required":true,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true},{"id":"data","displayName":"data","required":true,"defaultMatch":false,"display":true,"type":"dateTime","canBeUsedToMatch":true},{"id":"forma_pagamento","displayName":"forma_pagamento","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"conta","displayName":"conta","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"recorrente","displayName":"recorrente","required":false,"defaultMatch":false,"display":true,"type":"boolean","canBeUsedToMatch":true},{"id":"parcelas","displayName":"parcelas","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true},{"id":"observacao","displayName":"observacao","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"created_at","displayName":"created_at","required":false,"defaultMatch":false,"display":true,"type":"dateTime","canBeUsedToMatch":true},{"id":"updated_at","displayName":"updated_at","required":false,"defaultMatch":false,"display":true,"type":"dateTime","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.postgresTool","typeVersion":2.6,"position":[-80,352],"id":"f2c9bc4f-f7c7-4044-9fb7-f14ecec80d1d","name":"Expense","credentials":{"postgres":{"id":"iZzbVy2qVYG0Rd5z","name":"Postgres account"}}}],"connections":{"AI Agent Tool":{"ai_tool":[[{"node":"MCP Server Trigger","type":"ai_tool","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent Tool","type":"ai_languageModel","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent Tool","type":"ai_outputParser","index":0}]]},"Income":{"ai_tool":[[{"node":"AI Agent Tool","type":"ai_tool","index":0}]]},"Expense":{"ai_tool":[[{"node":"AI Agent Tool","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1","availableInMCP":false},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"56366888-bb19-4f0b-9c36-bca69f9d6239","activeVersionId":null,"triggerCount":1,"shared":[{"updatedAt":"2026-01-05T17:30:35.746Z","createdAt":"2026-01-05T17:30:35.746Z","role":"workflow:owner","workflowId":"ZmjNvqPZalYgqNHN","projectId":"QzOxscPU2fsVc9gL"}],"activeVersion":null,"tags":[{"updatedAt":"2025-12-28T16:26:50.362Z","createdAt":"2025-12-28T16:26:50.362Z","id":"I1XEUT2DBgIBJaKj","name":"Caio Henrique"}],"error":"Your request is invalid or could not be processed by the service"}